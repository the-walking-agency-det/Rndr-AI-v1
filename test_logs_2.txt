
> indii-os@0.0.0 test
> vitest


[1m[44m DEV [49m[22m [34mv4.0.15 [39m[90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1[39m

 [32mâœ“[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39m[2025-12-05T21:16:45.135Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[32m 25[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

 [32mâœ“[39m src/modules/marketing/components/BrandManager.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 156[2mms[22m[39m
[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 1598[2mms[22m[39m
     [33m[2mâœ“[22m[39m switches to review when pendingPrompt is set [33m 848[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39m[2025-12-05T21:16:47.453Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/modules/marketing/MarketingDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/marketing/MarketingDashboard.test.tsx
[22m[39m[2025-12-05T21:16:47.502Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

[90mstderr[2m | src/modules/creative/components/CreativeNavbar.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

 [32mâœ“[39m src/modules/marketing/MarketingDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 450[2mms[22m[39m
 [32mâœ“[39m src/modules/social/SocialDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 382[2mms[22m[39m
 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2201[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 359[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 322[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 338[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 320[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 334[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 329[2mms[22m[39m
[90mstderr[2m | src/modules/creative/components/__tests__/CreativeCanvas.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/creative/components/__tests__/CreativeCanvas.test.tsx
[22m[39m[2025-12-05T21:16:48.209Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/modules/creative/components/CreativeNavbar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 499[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/__tests__/CreativeCanvas.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 210[2mms[22m[39m
[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mgenerates itinerary when inputs are valid
[22m[39mMock httpsCallable called for: generateItinerary
Mock function executed for generateItinerary with data: {
  locations: [ [32m'New York'[39m ],
  dates: { start: [32m'2023-10-01'[39m, end: [32m'2023-10-10'[39m }
}

[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mchecks logistics after generating itinerary
[22m[39mMock httpsCallable called for: generateItinerary
Mock function executed for generateItinerary with data: {
  locations: [ [32m'New York'[39m ],
  dates: { start: [32m'2023-10-01'[39m, end: [32m'2023-10-10'[39m }
}

[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mchecks logistics after generating itinerary
[22m[39mMock httpsCallable called for: checkLogistics
Mock function executed for checkLogistics with data: {
  itinerary: {
    tourName: [32m'Test Tour'[39m,
    stops: [ [36m[Object][39m ],
    totalDistance: [32m'1000 km'[39m,
    estimatedBudget: [32m'$50000'[39m
  }
}

 [32mâœ“[39m src/modules/touring/RoadManager.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 647[2mms[22m[39m
     [33m[2mâœ“[22m[39m generates itinerary when inputs are valid [33m 358[2mms[22m[39m
 [32mâœ“[39m src/core/components/RightPanel.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 152[2mms[22m[39m
 [32mâœ“[39m src/core/components/ChatOverlay.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 82[2mms[22m[39m
[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the dashboard header and welcome message
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the New Project button
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 106[2mms[22m[39m
[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens the New Project modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders recent projects
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders Knowledge Base upload section
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens Brand Kit modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mcalls auth.signOut when Sign Out button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/modules/dashboard/Dashboard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 264[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoPropertiesPanel.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[2025-12-05T21:16:51.353Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Campaign Manager (campaign)

 [32mâœ“[39m src/services/agent/specialists/verification.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/StudioNavControls.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 525[2mms[22m[39m
[90mstderr[2m | src/modules/marketing/components/CampaignManager.test.tsx[2m > [22m[2mCampaignManager[2m > [22m[2mcalls executeCampaign when execute button is clicked
[22m[39mAn update to CampaignManager inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32mâœ“[39m src/modules/creative/components/CreativeGallery.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 351[2mms[22m[39m
 [32mâœ“[39m src/modules/marketing/components/CampaignManager.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 384[2mms[22m[39m
 [32mâœ“[39m src/modules/legal/LegalDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 205[2mms[22m[39m
[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[2025-12-05T21:16:53.717Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/core/components/CommandBar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 406[2mms[22m[39m
[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould include conversation history in the context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould assemble full pipeline context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould return a lightweight handle instead of full project object
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould have get_project_details tool available in BaseAgent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould route based on user intent via LLM
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentOrchestrator] Routing failed, defaulting to generalist. Error: LLM Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/agent/AgentArchitecture.test.ts:123:63
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate legal agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate campaign agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate music agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate publicist agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate brand agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate road agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate creative agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate video agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentService] Selected Agent: creative (Forced)
[AgentExecutor] Executing with agent: Creative Director (creative)
[Creative Director] Received task: Draft a contract

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentService] Selected Agent: creative (Forced)

 [32mâœ“[39m src/services/agent/AgentArchitecture.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 41[2mms[22m[39m
[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mrenders organization list
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mhandles organization selection
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

 [32mâœ“[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

 [32mâœ“[39m src/modules/video/components/ReviewStep.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 351[2mms[22m[39m
[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39m[2025-12-05T21:16:54.797Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/tools/VideoTools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m src/modules/workflow/components/UniversalNode.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 121[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoTimeline.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 256[2mms[22m[39m
 [32mâœ“[39m src/components/kokonutui/file-upload.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 1811[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders upload button [33m 346[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders take photo button on mobile (simulated) [33m 703[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers file input with capture attribute when take photo is clicked [33m 752[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/CanvasToolbar.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 455[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls toggleMagicFill when magic fill button is clicked [33m 319[2mms[22m[39m
 [32mâœ“[39m src/modules/music/MusicStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 735[2mms[22m[39m
     [33m[2mâœ“[22m[39m shows context state after starting engine [33m 321[2mms[22m[39m
 [32mâœ“[39m src/modules/music/services/AudioAnalysisEngine.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 120[2mms[22m[39m
[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39m[2025-12-05T21:17:07.780Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/image/__tests__/EditingService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Output: RAG Result Content

[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Execution Complete

 [32mâœ“[39m src/modules/workflow/services/WorkflowEngine.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 579[2mms[22m[39m
     [33m[2mâœ“[22m[39m executes a simple workflow with Knowledge Base node [33m 577[2mms[22m[39m
 [32mâœ“[39m src/test/3d-components.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 416[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders ThreeDCard without crashing [33m 371[2mms[22m[39m
[90mstderr[2m | src/modules/video/store/videoEditorStore.test.ts[2m > [22m[2museVideoEditorStore[2m > [22m[2menforces standard duration limit
[22m[39mProject duration limited to 8 minutes.

 [32mâœ“[39m src/modules/video/store/videoEditorStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 147[2mms[22m[39m
[90mstderr[2m | src/services/image/__tests__/ImageGenerationService.test.ts[2m > [22m[2mImageGenerationService[2m > [22m[2mgenerateImages[2m > [22m[2mshould handle errors gracefully
[22m[39mImage Generation Error: Error: AI Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/ImageGenerationService.test.ts:56:49
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/services/image/__tests__/ImageGenerationService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 212[2mms[22m[39m
[90mstderr[2m | functions/src/agents/road-manager/index.test.ts[2m > [22m[2mRoadManagerAgent[2m > [22m[2mshould handle Google Maps API errors gracefully
[22m[39mFailed to calculate distances: Error: API Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mfunctions/src/agents/road-manager/index.test.ts:70:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m functions/src/agents/road-manager/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:37:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:53:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mFallback failed: Error: Image Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:54:71
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/services/image/__tests__/VideoGenerationService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 28[2mms[22m[39m
[90mstdout[2m | src/services/agent/specialists/specialists.test.ts[2m > [22m[2mSpecialist Agents Connection[2m > [22m[2mshould inherit Agent Zero superpowers via BaseAgent
[22m[39m[Brand Manager] Received task: Test Task

 [32mâœ“[39m src/services/agent/specialists/specialists.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/services/agent/MemoryService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39m[2025-12-05T21:17:18.820Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/agent_restore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m src/services/onboarding/onboardingService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 207[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts
[22m[39mMissing VITE_API_KEY or VITE_VERTEX_PROJECT_ID

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward generic errors
[22m[39mGenerate Content Failed: Error: Generic failure
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:31:45
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39m[2025-12-05T21:17:22.812Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 2000ms... (2 attempts left)

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mexecutes a simple task immediately (Executor Mode)
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mreturns the final response correctly
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mhandles tool execution errors gracefully
[22m[39m[Agent Zero] Received task: Fail tool

 [32mâœ“[39m src/services/agent/GeneralistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39m[2025-12-05T21:17:23.622Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/specialists/specialists_tools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstderr[2m | processTicksAndRejections (node:internal/process/task_queues:105:5)
[22m[39mFirebaseError: Firebase: Error (auth/too-many-requests).
    at createErrorInternal [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/auth/dist/node-esm/totp-c8d207b9.js:499:41[90m)[39m
    at _fail [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/auth/dist/node-esm/totp-c8d207b9.js:474:11[90m)[39m
    at _performFetchWithErrorHandling [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/auth/dist/node-esm/totp-c8d207b9.js:961:17[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _performSignInRequest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/auth/dist/node-esm/totp-c8d207b9.js:976:28[90m)[39m
    at signInAnonymously [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/auth/dist/node-esm/totp-c8d207b9.js:5504:22[90m)[39m {
  code: [32m'auth/too-many-requests'[39m,
  customData: {}
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 4000ms... (1 attempts left)

 [32mâœ“[39m src/services/agent/components/AgentOrchestrator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m src/services/ProjectService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized SAFETY_VIOLATION error
[22m[39mGenerate Content Failed: Error: Safety violation
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:51:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'SAFETY_VIOLATION'[39m }
}

 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 5034[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 19[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5005[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 3[2mms[22m[39m
 [32mâœ“[39m src/services/StorageService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/modules/workflow/utils/validationUtils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 5 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/services/ai/AIServiceErrors.test.ts[2m > [22mAIService Error Handling[2m > [22mshould forward standardized QUOTA_EXCEEDED error
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/services/ai/AIServiceErrors.test.ts:[2m39:5[22m[39m
    [90m 37| [39m    })[33m;[39m
    [90m 38| [39m
    [90m 39| [39m    it('should forward standardized QUOTA_EXCEEDED error', async () =>â€¦
    [90m   | [39m    [31m^[39m
    [90m 40| [39m        [35mconst[39m error[33m:[39m any [33m=[39m [35mnew[39m [33mError[39m([32m'Quota exceeded'[39m)[33m;[39m
    [90m 41| [39m        error[33m.[39mdetails [33m=[39m { code[33m:[39m [33mAppErrorCode[39m[33m.[39m[33mQUOTA_EXCEEDED[39m }[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/5]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mrenders correctly with assets
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mcalls onClose when close button is clicked
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mhandles file upload via input
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22madds asset to reference image when clicked
[31m[1mReferenceError[22m: handleDragOver is not defined[39m
[36m [2mâ¯[22m BrandAssetsDrawer src/modules/creative/components/BrandAssetsDrawer.tsx:[2m114:37[22m[39m

[90m [2mâ¯[22m Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:[2m25904:20[22m[39m
[90m [2mâ¯[22m renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:[2m7662:22[22m[39m
[90m [2mâ¯[22m updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:[2m10166:19[22m[39m
[90m [2mâ¯[22m beginWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m11778:18[22m[39m
[90m [2mâ¯[22m runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2mâ¯[22m performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m17641:22[22m[39m
[90m [2mâ¯[22m workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17469:41[22m[39m
[90m [2mâ¯[22m renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17450:11[22m[39m
[90m [2mâ¯[22m performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:[2m16583:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/5]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m48 passed[39m[22m[90m (50)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m216 passed[39m[22m[90m (221)[39m
[2m   Start at [22m 16:16:40
[2m   Duration [22m 47.48s[2m (transform 9.39s, setup 20.07s, import 39.65s, tests 19.45s, environment 119.97s)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/services/ai/AIService.ts [22m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[32m 25[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 3[2mms[22m[39m
 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 5034[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 19[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5005[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 3[2mms[22m[39m
[90mstderr[2m | src/modules/creative/components/CreativeNavbar.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39m[2025-12-05T21:17:34.318Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

 [32mâœ“[39m src/core/components/CommandBar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 708[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the dropdown when delegate button is clicked [33m 320[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

 [32mâœ“[39m src/modules/social/SocialDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 686[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the Create Post modal when button is clicked [33m 313[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/CreativeNavbar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 635[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 1478[2mms[22m[39m
     [33m[2mâœ“[22m[39m switches to review when pendingPrompt is set [33m 596[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[2025-12-05T21:17:36.239Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould include conversation history in the context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould assemble full pipeline context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould return a lightweight handle instead of full project object
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould have get_project_details tool available in BaseAgent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould route based on user intent via LLM
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentOrchestrator] Routing failed, defaulting to generalist. Error: LLM Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/agent/AgentArchitecture.test.ts:123:63
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate legal agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate campaign agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate music agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate publicist agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate brand agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate road agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate creative agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate video agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentService] Selected Agent: creative (Forced)
[AgentExecutor] Executing with agent: Creative Director (creative)
[Creative Director] Received task: Draft a contract

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentService] Selected Agent: creative (Forced)

 [32mâœ“[39m src/services/agent/AgentArchitecture.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 11[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 38[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39m[2025-12-05T21:17:36.354Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/core/components/RightPanel.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 69[2mms[22m[39m
 [32mâœ“[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39m[2025-12-05T21:17:36.937Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[2025-12-05T21:17:36.994Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/tools/VideoTools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
[90mstdout[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Campaign Manager (campaign)

 [32mâœ“[39m src/services/agent/specialists/verification.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2308[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 456[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 363[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 326[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 315[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 320[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 315[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (13)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m72 passed[39m[22m[90m (77)[39m
[2m   Start at [22m 16:17:28
[2m   Duration [22m 18.37s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/services/ai/AIServiceErrors.test.ts [22m[34mx1 [34m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[32m 25[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 3[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts
[22m[39mMissing VITE_API_KEY or VITE_VERTEX_PROJECT_ID

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward generic errors
[22m[39mGenerate Content Failed: Error: Generic failure
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:31:45
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 2000ms... (2 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 4000ms... (1 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized SAFETY_VIOLATION error
[22m[39mGenerate Content Failed: Error: Safety violation
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:51:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'SAFETY_VIOLATION'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould retry on transient QUOTA_EXCEEDED error and succeed
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:62:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould retry on transient QUOTA_EXCEEDED error and succeed
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 6059[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5020[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 5[2mms[22m[39m
     [33m[2mâœ“[22m[39m should retry on transient QUOTA_EXCEEDED error and succeed [33m 1028[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/services/ai/AIServiceErrors.test.ts[2m > [22mAIService Error Handling[2m > [22mshould forward standardized QUOTA_EXCEEDED error
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/services/ai/AIServiceErrors.test.ts:[2m39:5[22m[39m
    [90m 37| [39m    })[33m;[39m
    [90m 38| [39m
    [90m 39| [39m    it('should forward standardized QUOTA_EXCEEDED error', async () =>â€¦
    [90m   | [39m    [31m^[39m
    [90m 40| [39m        [35mconst[39m error[33m:[39m any [33m=[39m [35mnew[39m [33mError[39m([32m'Quota exceeded'[39m)[33m;[39m
    [90m 41| [39m        error[33m.[39mdetails [33m=[39m { code[33m:[39m [33mAppErrorCode[39m[33m.[39m[33mQUOTA_EXCEEDED[39m }[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 16:17:37
[2m   Duration [22m 6.35s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/modules/video/editor/components/VideoPropertiesPanel.tsx [22m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[32m 25[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 3[2mms[22m[39m
 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 6059[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 3[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5020[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 5[2mms[22m[39m
     [33m[2mâœ“[22m[39m should retry on transient QUOTA_EXCEEDED error and succeed [33m 1028[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoPropertiesPanel.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 512[2mms[22m[39m
[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 584[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correctly [33m 471[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 3511[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders the empty state initially [33m 337[2mms[22m[39m
     [33m[2mâœ“[22m[39m switches to review when pendingPrompt is set [33m 2142[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers video generation job with orgId [33m 578[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2751[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders all sidebar items [33m 441[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls setModule when a sidebar item is clicked [33m 330[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 368[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 342[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 331[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 316[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 309[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 311[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m22 passed[39m[22m[90m (27)[39m
[2m   Start at [22m 16:17:47
[2m   Duration [22m 22.54s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
