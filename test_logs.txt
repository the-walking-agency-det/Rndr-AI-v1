
> indii-os@0.0.0 test
> vitest


[1m[44m DEV [49m[22m [34mv4.0.15 [39m[90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1[39m

 [31mâ¯[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 14[2mms[22m[39m
[31m     [31mÃ—[31m generates Production URL by default[39m[32m 10[2mms[22m[39m
[31m     [31mÃ—[31m generates Emulator URL when DEV is true[39m[32m 2[2mms[22m[39m
[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mrenders organization list
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mrenders error when organizations is undefined
[22m[39mSelectOrg: Mounted { organizationsCount: [33m0[39m }

[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mhandles organization selection
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

 [31mâ¯[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 108[2mms[22m[39m
     [32mâœ“[39m renders organization list[32m 45[2mms[22m[39m
[31m     [31mÃ—[31m renders error when organizations is undefined[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m handles organization selection[32m 41[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39m[2025-12-05T21:12:23.585Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 29[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[32m 19[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 2[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 3[2mms[22m[39m
 [31mâ¯[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 10[2mms[22m[39m
[31m     [31mÃ—[31m should be instantiated with correct properties[39m[32m 8[2mms[22m[39m
     [32mâœ“[39m write_press_release should return text[32m 1[2mms[22m[39m
     [32mâœ“[39m generate_crisis_response should return text[32m 0[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

 [32mâœ“[39m src/modules/video/components/ReviewStep.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 194[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mgenerates itinerary when inputs are valid
[22m[39mMock httpsCallable called for: generateItinerary
Mock function executed for generateItinerary with data: {
  locations: [ [32m'New York'[39m ],
  dates: { start: [32m'2023-10-01'[39m, end: [32m'2023-10-10'[39m }
}

[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mchecks logistics after generating itinerary
[22m[39mMock httpsCallable called for: generateItinerary
Mock function executed for generateItinerary with data: {
  locations: [ [32m'New York'[39m ],
  dates: { start: [32m'2023-10-01'[39m, end: [32m'2023-10-10'[39m }
}

[90mstdout[2m | src/modules/touring/RoadManager.test.tsx[2m > [22m[2mRoadManager[2m > [22m[2mchecks logistics after generating itinerary
[22m[39mMock httpsCallable called for: checkLogistics
Mock function executed for checkLogistics with data: {
  itinerary: {
    tourName: [32m'Test Tour'[39m,
    stops: [ [36m[Object][39m ],
    totalDistance: [32m'1000 km'[39m,
    estimatedBudget: [32m'$50000'[39m
  }
}

 [32mâœ“[39m src/modules/touring/RoadManager.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39m[2025-12-05T21:12:24.889Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

 [32mâœ“[39m src/modules/social/SocialDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 237[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 459[2mms[22m[39m
[90mstderr[2m | src/modules/marketing/components/CampaignManager.test.tsx[2m > [22m[2mCampaignManager[2m > [22m[2mcalls executeCampaign when execute button is clicked
[22m[39mAn update to CampaignManager inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32mâœ“[39m src/modules/marketing/components/CampaignManager.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the dashboard header and welcome message
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the New Project button
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens the New Project modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders recent projects
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders Knowledge Base upload section
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens Brand Kit modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mcalls auth.signOut when Sign Out button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/modules/dashboard/Dashboard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 94[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

[90mstderr[2m | src/modules/creative/components/CreativeNavbar.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2024[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 358[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 323[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 311[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 345[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 308[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 307[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoTimeline.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/CreativeNavbar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 159[2mms[22m[39m
 [32mâœ“[39m src/core/components/RightPanel.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 47[2mms[22m[39m
[90mstderr[2m | src/modules/creative/components/__tests__/CreativeCanvas.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/creative/components/__tests__/CreativeCanvas.test.tsx
[22m[39m[2025-12-05T21:12:26.130Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/modules/creative/components/__tests__/CreativeCanvas.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m src/modules/legal/LegalDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 57[2mms[22m[39m
[90mstderr[2m | src/modules/marketing/MarketingDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/marketing/MarketingDashboard.test.tsx
[22m[39m[2025-12-05T21:12:26.647Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/modules/creative/components/CreativeGallery.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 95[2mms[22m[39m
 [32mâœ“[39m src/core/components/CommandBar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 348[2mms[22m[39m
 [32mâœ“[39m src/modules/marketing/MarketingDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 412[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/StudioNavControls.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 220[2mms[22m[39m
[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 90[2mms[22m[39m
 [32mâœ“[39m src/modules/music/MusicStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32mâœ“[39m src/modules/marketing/components/BrandManager.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 261[2mms[22m[39m
 [32mâœ“[39m src/core/components/ChatOverlay.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 217[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/CanvasToolbar.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 63[2mms[22m[39m
[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

 [32mâœ“[39m src/components/kokonutui/file-upload.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 77[2mms[22m[39m
[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39m[2025-12-05T21:12:29.562Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Output: RAG Result Content

[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Execution Complete

 [32mâœ“[39m src/modules/workflow/services/WorkflowEngine.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m src/modules/workflow/components/UniversalNode.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 107[2mms[22m[39m
 [32mâœ“[39m src/test/3d-components.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 52[2mms[22m[39m
[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39m[2025-12-05T21:12:29.918Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/tools/VideoTools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoPropertiesPanel.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 341[2mms[22m[39m
 [32mâœ“[39m src/modules/music/services/AudioAnalysisEngine.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
[90mstderr[2m | src/services/image/__tests__/ImageGenerationService.test.ts[2m > [22m[2mImageGenerationService[2m > [22m[2mgenerateImages[2m > [22m[2mshould handle errors gracefully
[22m[39mImage Generation Error: Error: AI Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/ImageGenerationService.test.ts:56:49
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/services/image/__tests__/ImageGenerationService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:37:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:53:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mFallback failed: Error: Image Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:54:71
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[2025-12-05T21:12:30.897Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/image/__tests__/VideoGenerationService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould include conversation history in the context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould assemble full pipeline context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould return a lightweight handle instead of full project object
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould have get_project_details tool available in BaseAgent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould route based on user intent via LLM
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentOrchestrator] Routing failed, defaulting to generalist. Error: LLM Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/agent/AgentArchitecture.test.ts:123:63
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate legal agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate campaign agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate music agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate publicist agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate brand agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate road agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate creative agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate video agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentService] Selected Agent: creative (Forced)
[AgentExecutor] Executing with agent: Creative Director (creative)
[Creative Director] Received task: Draft a contract

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentService] Selected Agent: creative (Forced)

 [32mâœ“[39m src/services/agent/AgentArchitecture.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/services/agent/components/AgentOrchestrator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
[90mstderr[2m | src/modules/video/store/videoEditorStore.test.ts[2m > [22m[2museVideoEditorStore[2m > [22m[2menforces standard duration limit
[22m[39mProject duration limited to 8 minutes.

 [32mâœ“[39m src/modules/video/store/videoEditorStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/services/onboarding/onboardingService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/services/agent/MemoryService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts
[22m[39mMissing VITE_API_KEY or VITE_VERTEX_PROJECT_ID

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward generic errors
[22m[39mGenerate Content Failed: Error: Generic failure
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:31:45
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized SAFETY_VIOLATION error
[22m[39mGenerate Content Failed: Error: Safety violation
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:51:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'SAFETY_VIOLATION'[39m }
}

 [32mâœ“[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39m[2025-12-05T21:12:31.654Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/agent_restore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m src/services/ProjectService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/services/image/__tests__/EditingService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | src/services/agent/specialists/specialists.test.ts[2m > [22m[2mSpecialist Agents Connection[2m > [22m[2mshould inherit Agent Zero superpowers via BaseAgent
[22m[39m[Brand Manager] Received task: Test Task

 [32mâœ“[39m src/services/agent/specialists/specialists.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39m[2025-12-05T21:12:32.237Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

 [32mâœ“[39m src/services/agent/specialists/specialists_tools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39m[2025-12-05T21:12:32.394Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | functions/src/agents/road-manager/index.test.ts[2m > [22m[2mRoadManagerAgent[2m > [22m[2mshould handle Google Maps API errors gracefully
[22m[39mFailed to calculate distances: Error: API Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mfunctions/src/agents/road-manager/index.test.ts:70:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m functions/src/agents/road-manager/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mexecutes a simple task immediately (Executor Mode)
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mreturns the final response correctly
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mhandles tool execution errors gracefully
[22m[39m[Agent Zero] Received task: Fail tool

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[2025-12-05T21:12:32.461Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/agent/GeneralistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/modules/workflow/utils/validationUtils.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 1[2mms[22m[39m
[90mstdout[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Campaign Manager (campaign)

 [32mâœ“[39m src/services/agent/specialists/verification.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 2[2mms[22m[39m
 [32mâœ“[39m src/services/StorageService.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 8 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/core/config/EndpointService.test.ts[2m > [22mEndpointService[2m > [22mgenerates Production URL by default
[31m[1mAssertionError[22m: expected 'https://undefined-undefined.cloudfuncâ€¦' to be 'https://test-region-test-project.clouâ€¦' // Object.is equality[39m

Expected: [32m"https://[7mtest-region-test-project[27m.cloudfunctions.net/myFunction"[39m
Received: [31m"https://[7mundefined-undefined[27m.cloudfunctions.net/myFunction"[39m

[36m [2mâ¯[22m src/core/config/EndpointService.test.ts:[2m24:21[22m[39m
    [90m 22| [39m    [34mit[39m([32m'generates Production URL by default'[39m[33m,[39m () [33m=>[39m {
    [90m 23| [39m        [35mconst[39m url [33m=[39m endpointService[33m.[39m[34mgetFunctionUrl[39m([32m'myFunction'[39m)[33m;[39m
    [90m 24| [39m        expect(url).toBe('https://test-region-test-project.cloudfunctiâ€¦
    [90m   | [39m                    [31m^[39m
    [90m 25| [39m    })[33m;[39m
    [90m 26| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/8]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/core/config/EndpointService.test.ts[2m > [22mEndpointService[2m > [22mgenerates Emulator URL when DEV is true
[31m[1mAssertionError[22m: expected 'http://127.0.0.1:5001/undefined/undefâ€¦' to be 'http://127.0.0.1:5001/test-project/teâ€¦' // Object.is equality[39m

Expected: [32m"http://127.0.0.1:5001/[7mtest-project/test-region[27m/myFunction"[39m
Received: [31m"http://127.0.0.1:5001/[7mundefined/undefined[27m/myFunction"[39m

[36m [2mâ¯[22m src/core/config/EndpointService.test.ts:[2m32:21[22m[39m
    [90m 30| [39m
    [90m 31| [39m        [35mconst[39m url [33m=[39m endpointService[33m.[39m[34mgetFunctionUrl[39m([32m'myFunction'[39m)[33m;[39m
    [90m 32| [39m        expect(url).toBe('http://127.0.0.1:5001/test-project/test-regiâ€¦
    [90m   | [39m                    [31m^[39m
    [90m 33| [39m    })[33m;[39m
    [90m 34| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/8]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/auth/SelectOrg.test.tsx[2m > [22mSelectOrg[2m > [22mrenders error when organizations is undefined
[31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: Error: Store not initialized correctly.. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"flex items-center justify-center min-h-screen bg-black text-white p-4"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"w-full max-w-md"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center mb-8"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"w-16 h-16 bg-white rounded-2xl mx-auto mb-6 flex items-center justify-center"[31m
          [36m>[31m
            [36m<span[31m
              [33mclass[31m=[32m"text-3xl font-bold text-black tracking-tighter"[31m
            [36m>[31m
              [0mii[0m
            [36m</span>[31m
          [36m</div>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-2xl font-bold mb-2"[31m
          [36m>[31m
            [0mSelect Organization[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-gray-500"[31m
          [36m>[31m
            [0mChoose a workspace to continue[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"space-y-3 mb-8"[31m
        [36m/>[31m
        [36m<button[31m
          [33mclass[31m=[32m"w-full py-3 border border-dashed border-[#333] rounded-xl text-gray-500 hover:text-white hover:border-gray-500 transition-all flex items-center justify-center gap-2 font-medium"[31m
        [36m>[31m
          [36m<svg[31m
            [33maria-hidden[31m=[32m"true"[31m
            [33mclass[31m=[32m"lucide lucide-plus"[31m
            [33mfill[31m=[32m"none"[31m
            [33mheight[31m=[32m"18"[31m
            [33mstroke[31m=[32m"currentColor"[31m
            [33mstroke-linecap[31m=[32m"round"[31m
            [33mstroke-linejoin[31m=[32m"round"[31m
            [33mstroke-width[31m=[32m"2"[31m
            [33mviewBox[31m=[32m"0 0 24 24"[31m
            [33mwidth[31m=[32m"18"[31m
            [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
          [36m>[31m
            [36m<path[31m
              [33md[31m=[32m"M5 12h14"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M12 5v14"[31m
            [36m/>[31m
          [36m</svg>[31m
          [0mCreate New Organization[0m
        [36m</button>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/modules/auth/SelectOrg.test.tsx:[2m51:23[22m[39m
    [90m 49| [39m        })[33m;[39m
    [90m 50| [39m        [34mrender[39m([33m<[39m[33mSelectOrg[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 51| [39m        expect(screen.getByText('Error: Store not initialized correctlâ€¦
    [90m   | [39m                      [31m^[39m
    [90m 52| [39m    })[33m;[39m
    [90m 53| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/8]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/publicist/PublicistAgent.test.ts[2m > [22mPublicistAgent[2m > [22mshould be instantiated with correct properties
[31m[1mAssertionError[22m: expected 'Manages public relations and media coâ€¦' to contain 'press releases'[39m

Expected: [32m"press releases"[39m
Received: [31m"Manages public relations and media communications."[39m

[36m [2mâ¯[22m src/modules/publicist/PublicistAgent.test.ts:[2m28:35[22m[39m
    [90m 26| [39m        [34mexpect[39m(agent[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'publicist'[39m)[33m;[39m
    [90m 27| [39m        [34mexpect[39m(agent[33m.[39mname)[33m.[39m[34mtoBe[39m([32m'Publicist'[39m)[33m;[39m
    [90m 28| [39m        [34mexpect[39m(agent[33m.[39mdescription)[33m.[39m[34mtoContain[39m([32m'press releases'[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m 29| [39m    })[33m;[39m
    [90m 30| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/8]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mrenders correctly with assets
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mcalls onClose when close button is clicked
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mhandles file upload via input
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22madds asset to reference image when clicked
[31m[1mReferenceError[22m: isDragging is not defined[39m
[36m [2mâ¯[22m BrandAssetsDrawer src/modules/creative/components/BrandAssetsDrawer.tsx:[2m112:154[22m[39m

[90m [2mâ¯[22m Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:[2m25904:20[22m[39m
[90m [2mâ¯[22m renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:[2m7662:22[22m[39m
[90m [2mâ¯[22m updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:[2m10166:19[22m[39m
[90m [2mâ¯[22m beginWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m11778:18[22m[39m
[90m [2mâ¯[22m runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2mâ¯[22m performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m17641:22[22m[39m
[90m [2mâ¯[22m workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17469:41[22m[39m
[90m [2mâ¯[22m renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17450:11[22m[39m
[90m [2mâ¯[22m performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:[2m16583:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/8]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m46 passed[39m[22m[90m (50)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m214 passed[39m[22m[90m (222)[39m
[2m   Start at [22m 16:12:22
[2m   Duration [22m 10.58s[2m (transform 2.21s, setup 3.91s, import 10.59s, tests 6.44s, environment 24.02s)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/modules/creative/components/BrandAssetsDrawer.tsx [22m[39m

 [31mâ¯[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 10[2mms[22m[39m
[31m     [31mÃ—[31m should be instantiated with correct properties[39m[32m 8[2mms[22m[39m
     [32mâœ“[39m write_press_release should return text[32m 1[2mms[22m[39m
     [32mâœ“[39m generate_crisis_response should return text[32m 0[2mms[22m[39m
 [31mâ¯[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 14[2mms[22m[39m
[31m     [31mÃ—[31m generates Production URL by default[39m[32m 10[2mms[22m[39m
[31m     [31mÃ—[31m generates Emulator URL when DEV is true[39m[32m 2[2mms[22m[39m
 [31mâ¯[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 108[2mms[22m[39m
     [32mâœ“[39m renders organization list[32m 45[2mms[22m[39m
[31m     [31mÃ—[31m renders error when organizations is undefined[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m handles organization selection[32m 41[2mms[22m[39m
[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/creative/components/CreativeNavbar.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39m[2025-12-05T21:15:31.311Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 793[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers image generation when pendingPrompt is set [33m 487[2mms[22m[39m
 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

 [32mâœ“[39m src/modules/social/SocialDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 3115[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders the dashboard header [33m 1066[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the Create Post modal when button is clicked [33m 1251[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the Add Account wizard when button is clicked [33m 496[2mms[22m[39m
 [32mâœ“[39m src/modules/creative/components/CreativeNavbar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1712[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correctly [33m 1040[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles video generation trigger [33m 313[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 3977[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders all sidebar items [33m 664[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls setModule when a sidebar item is clicked [33m 536[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 763[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 325[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 322[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 311[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 321[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 730[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 4 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mrenders correctly with assets
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mcalls onClose when close button is clicked
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22mhandles file upload via input
[41m[1m FAIL [22m[49m src/modules/creative/components/BrandAssetsDrawer.test.tsx[2m > [22mBrandAssetsDrawer[2m > [22madds asset to reference image when clicked
[31m[1mReferenceError[22m: handleDragOver is not defined[39m
[36m [2mâ¯[22m BrandAssetsDrawer src/modules/creative/components/BrandAssetsDrawer.tsx:[2m114:37[22m[39m

[90m [2mâ¯[22m Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:[2m25904:20[22m[39m
[90m [2mâ¯[22m renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:[2m7662:22[22m[39m
[90m [2mâ¯[22m updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:[2m10166:19[22m[39m
[90m [2mâ¯[22m beginWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m11778:18[22m[39m
[90m [2mâ¯[22m runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:[2m874:13[22m[39m
[90m [2mâ¯[22m performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:[2m17641:22[22m[39m
[90m [2mâ¯[22m workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17469:41[22m[39m
[90m [2mâ¯[22m renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:[2m17450:11[22m[39m
[90m [2mâ¯[22m performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:[2m16583:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/4]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (8)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m26 passed[39m[22m[90m (34)[39m
[2m   Start at [22m 16:15:13
[2m   Duration [22m 57.29s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/core/config/EndpointService.test.ts [22m[39m

 [31mâ¯[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 108[2mms[22m[39m
     [32mâœ“[39m renders organization list[32m 45[2mms[22m[39m
[31m     [31mÃ—[31m renders error when organizations is undefined[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m handles organization selection[32m 41[2mms[22m[39m
 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
 [31mâ¯[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 7[2mms[22m[39m
[31m     [31mÃ—[31m generates Production URL by default[39m[32m 6[2mms[22m[39m
[31m     [31mÃ—[31m generates Emulator URL when DEV is true[39m[32m 1[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39m[2025-12-05T21:15:43.811Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 2 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/core/config/EndpointService.test.ts[2m > [22mEndpointService[2m > [22mgenerates Production URL by default
[31m[1mAssertionError[22m: expected 'https://undefined-undefined.cloudfuncâ€¦' to be 'https://test-region-test-project.clouâ€¦' // Object.is equality[39m

Expected: [32m"https://[7mtest-region-test-project[27m.cloudfunctions.net/myFunction"[39m
Received: [31m"https://[7mundefined-undefined[27m.cloudfunctions.net/myFunction"[39m

[36m [2mâ¯[22m src/core/config/EndpointService.test.ts:[2m26:21[22m[39m
    [90m 24| [39m    [34mit[39m([32m'generates Production URL by default'[39m[33m,[39m () [33m=>[39m {
    [90m 25| [39m        [35mconst[39m url [33m=[39m endpointService[33m.[39m[34mgetFunctionUrl[39m([32m'myFunction'[39m)[33m;[39m
    [90m 26| [39m        expect(url).toBe('https://test-region-test-project.cloudfunctiâ€¦
    [90m   | [39m                    [31m^[39m
    [90m 27| [39m    })[33m;[39m
    [90m 28| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/2]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/core/config/EndpointService.test.ts[2m > [22mEndpointService[2m > [22mgenerates Emulator URL when DEV is true
[31m[1mAssertionError[22m: expected 'http://127.0.0.1:5001/undefined/undefâ€¦' to be 'http://127.0.0.1:5001/test-project/teâ€¦' // Object.is equality[39m

Expected: [32m"http://127.0.0.1:5001/[7mtest-project/test-region[27m/myFunction"[39m
Received: [31m"http://127.0.0.1:5001/[7mundefined/undefined[27m/myFunction"[39m

[36m [2mâ¯[22m src/core/config/EndpointService.test.ts:[2m34:21[22m[39m
    [90m 32| [39m
    [90m 33| [39m        [35mconst[39m url [33m=[39m endpointService[33m.[39m[34mgetFunctionUrl[39m([32m'myFunction'[39m)[33m;[39m
    [90m 34| [39m        expect(url).toBe('http://127.0.0.1:5001/test-project/test-regiâ€¦
    [90m   | [39m                    [31m^[39m
    [90m 35| [39m    })[33m;[39m
    [90m 36| [39m})[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/2]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (12)[39m
[2m   Start at [22m 16:15:37
[2m   Duration [22m 2.17s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/core/components/CommandBar.tsx [22m[39m

 [31mâ¯[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 7[2mms[22m[39m
[31m     [31mÃ—[31m generates Production URL by default[39m[32m 6[2mms[22m[39m
[31m     [31mÃ—[31m generates Emulator URL when DEV is true[39m[32m 1[2mms[22m[39m
 [31mâ¯[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 108[2mms[22m[39m
     [32mâœ“[39m renders organization list[32m 45[2mms[22m[39m
[31m     [31mÃ—[31m renders error when organizations is undefined[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m handles organization selection[32m 41[2mms[22m[39m
 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

 [32mâœ“[39m src/core/components/CommandBar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1228[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the dropdown when delegate button is clicked [33m 305[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends a message when form is submitted [32m 300[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2858[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls setModule when a sidebar item is clicked [33m 348[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 502[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 351[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 348[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 324[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 360[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 356[2mms[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (5)[39m
[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (24)[39m
[2m   Start at [22m 16:15:44
[2m   Duration [22m 16.95s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/core/config/EndpointService.test.ts [22m[34mx2 [34m[39m

 [31mâ¯[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 108[2mms[22m[39m
     [32mâœ“[39m renders organization list[32m 45[2mms[22m[39m
[31m     [31mÃ—[31m renders error when organizations is undefined[39m[32m 20[2mms[22m[39m
     [32mâœ“[39m handles organization selection[32m 41[2mms[22m[39m
 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/core/config/EndpointService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (9)[39m
[2m   Start at [22m 16:16:22
[2m   Duration [22m 396ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/modules/auth/SelectOrg.test.tsx [22m[34mx1 [34m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mrenders organization list
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

[90mstdout[2m | src/modules/auth/SelectOrg.test.tsx[2m > [22m[2mSelectOrg[2m > [22m[2mhandles organization selection
[22m[39mSelectOrg: Mounted { organizationsCount: [33m1[39m }

 [32mâœ“[39m src/modules/auth/SelectOrg.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 118[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 16:16:26
[2m   Duration [22m 1.81s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/services/ai/AIService.ts [22m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/social/SocialDashboard.test.tsx
[22m[39m[2025-12-05T21:17:08.232Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/modules/creative/components/CreativeNavbar.test.tsx
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 434[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

 [32mâœ“[39m src/modules/social/SocialDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 3346[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders the dashboard header [33m 1223[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the Create Post modal when button is clicked [33m 1426[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the Add Account wizard when button is clicked [33m 342[2mms[22m[39m
     [33m[2mâœ“[22m[39m displays stats [33m 344[2mms[22m[39m
 [32mâœ“[39m src/core/components/CommandBar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 2557[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders the delegate button correctly [33m 946[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens the dropdown when delegate button is clicked [33m 652[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends a message when form is submitted [33m 508[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

 [32mâœ“[39m src/modules/creative/components/CreativeNavbar.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1623[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correctly [33m 559[2mms[22m[39m
     [33m[2mâœ“[22m[39m opens and closes brand assets drawer [33m 462[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 3916[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders all sidebar items [33m 736[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls setModule when a sidebar item is clicked [33m 477[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 492[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 602[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 452[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 390[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 367[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 378[2mms[22m[39m
[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the dashboard header and welcome message
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 4734[2mms[22m[39m
     [33m[2mâœ“[22m[39m switches to review when pendingPrompt is set [33m 2258[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers video generation job with orgId [33m 1098[2mms[22m[39m
     [33m[2mâœ“[22m[39m listens for job completion and updates history with orgId [33m 984[2mms[22m[39m
[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders the New Project button
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens the New Project modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstderr[2m | src/services/agent/tools/VideoTools.test.ts
[22m[39m[2025-12-05T21:17:21.811Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders recent projects
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mrenders Knowledge Base upload section
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/core/components/RightPanel.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 571[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders collapsed state correctly [33m 324[2mms[22m[39m
 [32mâœ“[39m src/services/agent/tools/VideoTools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 96[2mms[22m[39m
[90mstderr[2m | src/modules/workflow/services/WorkflowEngine.test.ts
[22m[39m[2025-12-05T21:17:22.231Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mopens Brand Kit modal when button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m
Dashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

[90mstdout[2m | src/modules/dashboard/Dashboard.test.tsx[2m > [22m[2mDashboard[2m > [22m[2mcalls auth.signOut when Sign Out button is clicked
[22m[39mDashboard Render. Current User: user-1 Is Anonymous: [33mfalse[39m

 [32mâœ“[39m src/modules/dashboard/Dashboard.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 1351[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders the dashboard header and welcome message [33m 574[2mms[22m[39m
[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Output: RAG Result Content

[90mstdout[2m | src/modules/workflow/services/WorkflowEngine.test.ts[2m > [22m[2mWorkflowEngine[2m > [22m[2mexecutes a simple workflow with Knowledge Base node
[22m[39mWorkflow Execution Complete

 [32mâœ“[39m src/modules/workflow/services/WorkflowEngine.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts
[22m[39mMissing VITE_API_KEY or VITE_VERTEX_PROJECT_ID

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward generic errors
[22m[39mGenerate Content Failed: Error: Generic failure
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:31:45
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/image/__tests__/ImageGenerationService.test.ts[2m > [22m[2mImageGenerationService[2m > [22m[2mgenerateImages[2m > [22m[2mshould handle errors gracefully
[22m[39mImage Generation Error: Error: AI Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/ImageGenerationService.test.ts:56:49
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/services/image/__tests__/ImageGenerationService.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[2025-12-05T21:17:26.776Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/onboarding/onboardingService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould include conversation history in the context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m1. Context Pipeline & History[2m > [22m[2mshould assemble full pipeline context
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould return a lightweight handle instead of full project object
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m2. Handle Pattern & Reactive Recall[2m > [22m[2mshould have get_project_details tool available in BaseAgent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould route based on user intent via LLM
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstderr[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m3. Dynamic Orchestration[2m > [22m[2mshould fallback to generalist if LLM fails
[22m[39m[AgentOrchestrator] Routing failed, defaulting to generalist. Error: LLM Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/agent/AgentArchitecture.test.ts:123:63
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate legal agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate campaign agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate music agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate publicist agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate brand agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate road agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate creative agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m4. Specialist Agents Verification[2m > [22m[2mshould register and instantiate video agent
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m6. Direct Delegation Verification[2m > [22m[2mshould bypass orchestrator when forcedAgentId is provided
[22m[39m[AgentService] Selected Agent: creative (Forced)
[AgentExecutor] Executing with agent: Creative Director (creative)
[Creative Director] Received task: Draft a contract

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentRegistry] Registered: Legal Department (legal)
[AgentRegistry] Registered: Campaign Manager (campaign)
[AgentRegistry] Registered: Music Supervisor (music)
[AgentRegistry] Registered: Publicist (publicist)
[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Creative Director (creative)
[AgentRegistry] Registered: Video Producer (video)
[AgentRegistry] Registered: Agent Zero (generalist)

[90mstdout[2m | src/services/agent/AgentArchitecture.test.ts[2m > [22m[2mMulti-Agent Architecture Tests[2m > [22m[2m7. Glass Box UI Verification[2m > [22m[2mshould update store with thoughts when onProgress is triggered
[22m[39m[AgentService] Selected Agent: creative (Forced)

 [32mâœ“[39m src/services/agent/AgentArchitecture.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstderr[2m | src/services/agent/agent_restore.test.ts
[22m[39m[2025-12-05T21:17:27.128Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 2000ms... (2 attempts left)

 [32mâœ“[39m src/services/agent/agent_restore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 4000ms... (1 attempts left)

[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould fallback to storyboard if video generation fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:37:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstdout[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mAttempting Storyboard Fallback...

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mVideo Generation Error: Error: Video Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:53:57
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/image/__tests__/VideoGenerationService.test.ts[2m > [22m[2mVideoGenerationService[2m > [22m[2mgenerateVideo[2m > [22m[2mshould use ultimate fallback if everything fails
[22m[39mFallback failed: Error: Image Error
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/image/__tests__/VideoGenerationService.test.ts:54:71
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/agent/specialists/specialists_tools.test.ts
[22m[39m[2025-12-05T21:17:30.339Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/services/image/__tests__/VideoGenerationService.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 270[2mms[22m[39m
[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstdout[2m | src/services/agent/specialists/specialists.test.ts[2m > [22m[2mSpecialist Agents Connection[2m > [22m[2mshould inherit Agent Zero superpowers via BaseAgent
[22m[39m[Brand Manager] Received task: Test Task

 [32mâœ“[39m src/services/agent/specialists/specialists.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized SAFETY_VIOLATION error
[22m[39mGenerate Content Failed: Error: Safety violation
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:51:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'SAFETY_VIOLATION'[39m }
}

 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m3 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 5063[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 36[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5017[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 7[2mms[22m[39m
 [32mâœ“[39m src/services/agent/specialists/specialists_tools.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstderr[2m | src/services/agent/GeneralistAgent.test.ts
[22m[39m[2025-12-05T21:17:31.855Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mexecutes a simple task immediately (Executor Mode)
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mreturns the final response correctly
[22m[39m[Agent Zero] Received task: Simple task

[90mstdout[2m | src/services/agent/GeneralistAgent.test.ts[2m > [22m[2mGeneralistAgent[2m > [22m[2mhandles tool execution errors gracefully
[22m[39m[Agent Zero] Received task: Fail tool

 [32mâœ“[39m src/services/agent/GeneralistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m src/services/image/__tests__/EditingService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/services/agent/components/AgentOrchestrator.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 4[2mms[22m[39m
[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/modules/publicist/PublicistAgent.test.ts
[22m[39m[2025-12-05T21:17:35.368Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39mUsing partial/invalid config due to validation errors.

[90mstderr[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[2025-12-05T21:17:35.409Z]  @firebase/firestore: Firestore (12.6.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

 [32mâœ“[39m src/modules/publicist/PublicistAgent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 2[2mms[22m[39m
[90mstdout[2m | src/services/agent/specialists/verification.test.ts
[22m[39m[AgentRegistry] Registered: Brand Manager (brand)
[AgentRegistry] Registered: Road Manager (road)
[AgentRegistry] Registered: Campaign Manager (campaign)

 [32mâœ“[39m src/services/agent/specialists/verification.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/services/ai/AIServiceErrors.test.ts[2m > [22mAIService Error Handling[2m > [22mshould forward standardized QUOTA_EXCEEDED error
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/services/ai/AIServiceErrors.test.ts:[2m39:5[22m[39m
    [90m 37| [39m    })[33m;[39m
    [90m 38| [39m
    [90m 39| [39m    it('should forward standardized QUOTA_EXCEEDED error', async () =>â€¦
    [90m   | [39m    [31m^[39m
    [90m 40| [39m        [35mconst[39m error[33m:[39m any [33m=[39m [35mnew[39m [33mError[39m([32m'Quota exceeded'[39m)[33m;[39m
    [90m 41| [39m        error[33m.[39mdetails [33m=[39m { code[33m:[39m [33mAppErrorCode[39m[33m.[39m[33mQUOTA_EXCEEDED[39m }[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m22 passed[39m[22m[90m (24)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m116 passed[39m[22m[90m (121)[39m
[2m   Start at [22m 16:16:57
[2m   Duration [22m 82.05s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/services/ai/AIServiceErrors.test.ts [22m[34mx2 [34m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts
[22m[39mMissing VITE_API_KEY or VITE_VERTEX_PROJECT_ID

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward generic errors
[22m[39mGenerate Content Failed: Error: Generic failure
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:31:45
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 2000ms... (2 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:40:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized QUOTA_EXCEEDED error
[22m[39m[AIService] Operation failed, retrying in 4000ms... (1 attempts left)

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould forward standardized SAFETY_VIOLATION error
[22m[39mGenerate Content Failed: Error: Safety violation
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:51:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'SAFETY_VIOLATION'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould retry on transient QUOTA_EXCEEDED error and succeed
[22m[39mGenerate Content Failed: Error: Quota exceeded
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/services/ai/AIServiceErrors.test.ts:62:28
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m {
  details: { code: [32m'QUOTA_EXCEEDED'[39m }
}

[90mstderr[2m | src/services/ai/AIServiceErrors.test.ts[2m > [22m[2mAIService Error Handling[2m > [22m[2mshould retry on transient QUOTA_EXCEEDED error and succeed
[22m[39m[AIService] Operation failed, retrying in 1000ms... (3 attempts left)

 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 6058[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5015[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 11[2mms[22m[39m
     [33m[2mâœ“[22m[39m should retry on transient QUOTA_EXCEEDED error and succeed [33m 1019[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/services/ai/AIServiceErrors.test.ts[2m > [22mAIService Error Handling[2m > [22mshould forward standardized QUOTA_EXCEEDED error
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[36m [2mâ¯[22m src/services/ai/AIServiceErrors.test.ts:[2m39:5[22m[39m
    [90m 37| [39m    })[33m;[39m
    [90m 38| [39m
    [90m 39| [39m    it('should forward standardized QUOTA_EXCEEDED error', async () =>â€¦
    [90m   | [39m    [31m^[39m
    [90m 40| [39m        [35mconst[39m error[33m:[39m any [33m=[39m [35mnew[39m [33mError[39m([32m'Quota exceeded'[39m)[33m;[39m
    [90m 41| [39m        error[33m.[39mdetails [33m=[39m { code[33m:[39m [33mAppErrorCode[39m[33m.[39m[33mQUOTA_EXCEEDED[39m }[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 16:17:37
[2m   Duration [22m 6.28s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/modules/video/editor/components/VideoPropertiesPanel.tsx [22m[39m

 [31mâ¯[39m src/modules/creative/components/BrandAssetsDrawer.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 528[2mms[22m[39m
[31m     [31mÃ—[31m renders correctly with assets[39m[33m 505[2mms[22m[39m
[31m     [31mÃ—[31m calls onClose when close button is clicked[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m handles file upload via input[39m[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m adds asset to reference image when clicked[39m[32m 4[2mms[22m[39m
 [31mâ¯[39m src/services/ai/AIServiceErrors.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 6058[2mms[22m[39m
     [32mâœ“[39m should forward generic errors[32m 5[2mms[22m[39m
[31m     [31mÃ—[31m should forward standardized QUOTA_EXCEEDED error[39m[33m 5015[2mms[22m[39m
     [32mâœ“[39m should forward standardized SAFETY_VIOLATION error[32m 11[2mms[22m[39m
     [33m[2mâœ“[22m[39m should retry on transient QUOTA_EXCEEDED error and succeed [33m 1019[2mms[22m[39m
 [32mâœ“[39m src/modules/video/editor/components/VideoPropertiesPanel.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 1450[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders properties for selected clip [33m 1098[2mms[22m[39m
     [33m[2mâœ“[22m[39m adds a keyframe when diamond button is clicked [33m 326[2mms[22m[39m
[90mstderr[2m | src/core/components/SidebarNavigation.test.tsx
[22m[39mSpeech Recognition API not supported in this browser.

[90mstderr[2m | src/modules/creative/CreativeStudio.test.tsx[2m > [22m[2mCreativeStudio[2m > [22m[2mhandles generation errors gracefully
[22m[39mImage generation failed: Error: Generation failed
    at [90m/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/creative/CreativeStudio.test.tsx:114:46
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:145:11
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:915:26
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1240:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1206:10[90m)[39m
    at [90mfile:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:37
    at Traces.$ [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27[90m)[39m
    at trace [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21[90m)[39m
    at runTest [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:1650:12[90m)[39m

 [32mâœ“[39m src/modules/creative/CreativeStudio.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 471[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correctly [33m 406[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Brand Manager
[22m[39m[App] Current Module Changed: brand

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Campaign Manager
[22m[39m[App] Current Module Changed: campaign

[90mstderr[2m | src/modules/video/VideoWorkflow.test.tsx[2m > [22m[2mVideoWorkflow[2m > [22m[2mlistens for job completion and updates history with orgId
[22m[39mFailed to setup job listener: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
    at getApp [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/app/dist/esm/index.esm.js:726:29[90m)[39m
    at getFirestore [90m(file:///Volumes/X%20SSD%202025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39mnode_modules/[4m@firebase[24m/firestore/dist/index.node.mjs:29063:73[90m)[39m
    at setupListener [90m(/Volumes/X SSD 2025/Users/narrowchannel/Desktop/Rndr-AI-v1/[39msrc/modules/video/VideoWorkflow.tsx:64:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
  code: [32m'app/no-app'[39m,
  customData: { appName: [32m'[DEFAULT]'[39m }
}

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publicist
[22m[39m[App] Current Module Changed: publicist

 [32mâœ“[39m src/modules/video/VideoWorkflow.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 3772[2mms[22m[39m
     [33m[2mâœ“[22m[39m switches to review when pendingPrompt is set [33m 2300[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers video generation job with orgId [33m 765[2mms[22m[39m
     [33m[2mâœ“[22m[39m listens for job completion and updates history with orgId [33m 423[2mms[22m[39m
[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Publishing
[22m[39m[App] Current Module Changed: publishing

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Finance
[22m[39m[App] Current Module Changed: finance

[90mstdout[2m | src/core/components/SidebarNavigation.test.tsx[2m > [22m[2mSidebar Navigation Integration[2m > [22m[2mrenders correct dashboard for Licensing
[22m[39m[App] Current Module Changed: licensing

 [32mâœ“[39m src/core/components/SidebarNavigation.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 3234[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders all sidebar items [33m 707[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls setModule when a sidebar item is clicked [33m 308[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Brand Manager [33m 607[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Campaign Manager [33m 338[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publicist [33m 332[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Publishing [33m 312[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Finance [33m 312[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders correct dashboard for Licensing [33m 310[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[2m      Tests [22m [1m[31m5 failed[39m[22m[2m | [22m[1m[32m22 passed[39m[22m[90m (27)[39m
[2m   Start at [22m 16:17:47
[2m   Duration [22m 24.67s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
